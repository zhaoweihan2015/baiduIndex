function historyshow(){var e=document.getElementById("history").getElementsByTagName("ul")[0],t="";if(localStorage.historyBg){var n=localStorage.historyBg.split(","),a=n.length-27;if(n.length-27>=0)for(var i=a;i<n.length;i++)t+="<li><img src='"+n[i]+"'></li>";else{for(var i=0;i<n.length;i++)t+="<li><img src='"+n[i]+"'></li>";for(var s=0;s<Math.abs(a);s++)t+="<li></li>"}}e.innerHTML=t;for(var c=e.getElementsByTagName("img"),i=0;i<c.length;i++)!function(e){c[e].onclick=function(){changeBg(n[e],0),historyshow()}}(i)}function searchChange(e){1==e?1==localStorage.IndexStyle?(oSearch.className="searchChange newsearchChange",oSearch.getElementsByClassName("button")[0].innerHTML="<img src='dist/img/camera_newindex_layer_cc6dffd.png'/>"):(oSearch.className="searchChange",oSearch.getElementsByClassName("button")[0].innerHTML="<img src='dist/img/camera_layer_dc17de8.png'/>"):2==e&&(1==localStorage.IndexStyle?(oSearch.className="newsearchChange",oSearch.getElementsByClassName("button")[0].innerHTML="百度一下"):(oSearch.className="",oSearch.getElementsByClassName("button")[0].innerHTML="百度一下"))}function showNewsNumber(){0!=localStorage.newsNumber?(NewsNumber.innerHTML=" <span>百度贴吧</span>您有<span>"+localStorage.newsNumber+"条</span>新回复，快去查看吧",cleanNews.className=""):(NewsNumber.innerHTML="您目前没有新消息",cleanNews.className="noNews")}function changeBg(e,t){var n=document.getElementById("bgarticle"),a=document.getElementById("logo"),i=document.getElementsByTagName("header")[0];3==t?(localStorage.removeItem("nowBg"),n.style.backgroundImage="",a.src="dist/img/bd_logo1.png",i.className="",oSearch.className="",oSearch.getElementsByClassName("button")[0].innerHTML="百度一下",document.getElementsByClassName("blackbg")[0].style.display="none",localStorage.IndexStyle=0):(localStorage.nowBg=e,1==t&&(localStorage.historyBg?localStorage.historyBg=e+","+localStorage.historyBg:localStorage.historyBg=e),n.style.background="url('"+e+"')",a.src="dist/img/bd_logo2.png",i.className="newBg",localStorage.IndexStyle=1,document.getElementById("search").className="newsearchChange",document.getElementsByClassName("blackbg")[0].style.display="block")}function BgChange(e){this.obj=showBgPic,this.pic=e,this.num=null,this.oBox=null}function displayBox(e,t){for(var n=0;n<e.length;n++)e[n].style.display="none";for(var a=0;a<t.length;a++)t[a].className=""}function getObjectURL(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}BgChange.prototype.historyshow=historyshow;var oSearch=document.getElementById("search"),NewsNumber=document.getElementById("newsNumber"),cleanNews=document.getElementById("cleanNews");cleanNews.onclick=function(){localStorage.newsNumber=0,showNewsNumber()},document.getElementById("changbk").getElementsByTagName("a")[0].onclick=function(){document.getElementById("changebody").className="activeChangeBody"},document.getElementById("news").onclick=function(){this.getElementsByClassName("news")[0].style.display="block",showNewsNumber()},document.getElementById("close").onclick=function(){document.getElementById("changebody").className=""},document.onclick=function(e){for(var t=e||window.event,n=t.target||t.srcElement;n;){if("news"==n.id||"changbk"==n.id||"search"==n.id)return;n=n.parentNode}document.getElementsByClassName("news")[0].style.display="none",document.getElementById("changebody").className=null,searchChange(2)};var showBgPic=document.getElementsByClassName("bodyshow")[0];BgChange.prototype.addMinBg=function(){for(var e="",t=0;t<this.pic.length;t++)t%12==0&&(e+="<div class = 'imgshow'>"),t/6<1?e+=t%6==0?"<ul><li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/max-"+this.pic[t]+".jpg'></li>":t%6==5?"<li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/min-"+this.pic[t]+".jpg'></li></ul>":"<li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/min-"+this.pic[t]+".jpg'></li>":t/6>=1&&(e+=t%6==0?"<ul><li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/max-"+this.pic[t]+".jpg'></li>":t%6==5?"<li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/min-"+this.pic[t]+".jpg'></li></ul>":t%6==3?"<li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/max-"+this.pic[t]+".jpg'></li>":"<li><p></p><a>"+this.pic[t]+"</a><img alt="+this.pic[t]+" src = 'dist/backgroundImg/min-"+this.pic[t]+".jpg'></li>"),t%12!=11&&t!=this.pic.length||(e+="</div>");this.obj.getElementsByClassName("imgPlace")[0].innerHTML=e,document.getElementsByClassName("imgshow")[0].style.display="block",this.oBox=this.obj.getElementsByClassName("imgshow")},BgChange.prototype.showBoxPic=function(){for(var e=document.getElementById("showDiv"),t=document.getElementById("showBg"),n=this.oBox,a=0;a<n.length;a++){for(var i=n[a].getElementsByTagName("li"),s=0;s<i.length;s++)i[s].addEventListener("mousemove",function(){t.style.backgroundPositionX=0,e.style.backgroundImage='url("dist/backgroundImg/max-'+this.getElementsByTagName("img")[0].alt+'.jpg")'}),i[s].addEventListener("click",function(){changeBg("dist/backgroundImg/"+this.getElementsByTagName("img")[0].alt+".jpg",1),historyshow()});n[a].addEventListener("mouseout",function(){t.style.backgroundPositionX="270px",e.style.backgroundImage=""})}},BgChange.prototype.displayBox=displayBox,BgChange.prototype.changePicList=function(){var e=this.obj.getElementsByClassName("changelist")[0].getElementsByTagName("ul")[0],t=0;this.num=parseInt(this.pic.length/12)+1;var n="";n+="<p><</p>";for(var a=0;a<this.num;a++)n+=0==a?"<li class = 'chioce'></li>":"<li></li>";n+="<p>></p>",e.innerHTML=n;var i=this.oBox,s=e.getElementsByTagName("li"),c=e.getElementsByTagName("p");c[0].addEventListener("click",function(){displayBox(i,s),t--,t<0&&(t=0),s[t].className="chioce",i[t].style.display="block"}),c[1].addEventListener("click",function(){displayBox(i,s),t++,t>i.length-1&&(t=i.length-1),s[t].className="chioce",i[t].style.display="block"});for(var a=0;a<s.length;a++)!function(e){s[e].addEventListener("click",function(){displayBox(i,s),s[e].className="chioce",i[e].style.display="block"})}(a)},BgChange.prototype.customBg=function(){this.obj.getElementsByClassName("changelist")[0].getElementsByTagName("ul")[0].innerHTML="";var e='<div class = "imgshow" style = "display:block"><a href="javascript:;" class="file">+从你的计算机中选择图片<input type="file" name="" id="filePic"></a>';e+='<div class="tip">仅支持JPG,PNG图片，图片尺寸不小于1600*1000像素，10M以内（高质量图片效果更佳）</div></div>',this.obj.getElementsByClassName("imgPlace")[0].innerHTML=e,document.getElementById("filePic").addEventListener("change",function(){var e=getObjectURL(this.files[0]);document.getElementById("showDiv").style.backgroundImage='url("'+e+'")',changeBg(e,1),historyshow()})};var oNav=document.getElementById("changebody").getElementsByClassName("title")[0].getElementsByTagName("li"),pic=[pic1,pic2,pic3,pic4,pic5,pic6,pic7,pic8],p=new BgChange(pic1);p.addMinBg(),p.changePicList(),p.showBoxPic(),p.historyshow();for(var i=0;i<pic.length;i++)!function(e){oNav[e].addEventListener("click",function(){document.getElementById("history").style.display="none";var t=new BgChange(pic[e]);t.addMinBg(),t.changePicList(),t.showBoxPic()})}(i);oNav[8].addEventListener("click",function(){document.getElementById("history").style.display="none",(new BgChange).customBg()}),oNav[9].addEventListener("click",function(){document.getElementById("history").style.display="block"}),document.getElementById("returnBg").addEventListener("click",function(){changeBg("",3)});